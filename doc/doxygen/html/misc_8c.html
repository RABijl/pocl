<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Portable Compute Language: poclu/misc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pocl-80x60.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Portable Compute Language
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('misc_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">misc.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>poclu_misc - misc generic OpenCL helper functions  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;pocl_opencl.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for misc.c:</div>
<div class="dyncontent">
<div class="center"><img src="misc_8c__incl.png" border="0" usemap="#apoclu_2misc_8c" alt=""/></div>
<map name="apoclu_2misc_8c" id="apoclu_2misc_8c">
<area shape="rect" title="poclu_misc &#45; misc generic OpenCL helper functions" alt="" coords="223,5,326,32"/>
<area shape="rect" title=" " alt="" coords="5,80,72,107"/>
<area shape="rect" title=" " alt="" coords="97,80,167,107"/>
<area shape="rect" title=" " alt="" coords="191,80,262,107"/>
<area shape="rect" title=" " alt="" coords="287,80,361,107"/>
<area shape="rect" title=" " alt="" coords="386,80,459,107"/>
<area shape="rect" title=" " alt="" coords="483,80,594,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a397d286c9e716f522384d26072c963c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#a397d286c9e716f522384d26072c963c8">OPENCL_ERROR_CASE</a>(ERR)</td></tr>
<tr class="memdesc:a397d286c9e716f522384d26072c963c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">private macro to check errors in check_cl_error function  <a href="misc_8c.html#a397d286c9e716f522384d26072c963c8">More...</a><br /></td></tr>
<tr class="separator:a397d286c9e716f522384d26072c963c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac9b087a0db54cb46f652e6a152955e4c"><td class="memItemLeft" align="right" valign="top">cl_context&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#ac9b087a0db54cb46f652e6a152955e4c">poclu_create_any_context</a> ()</td></tr>
<tr class="memdesc:ac9b087a0db54cb46f652e6a152955e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a context in the first platform found.  <a href="misc_8c.html#ac9b087a0db54cb46f652e6a152955e4c">More...</a><br /></td></tr>
<tr class="separator:ac9b087a0db54cb46f652e6a152955e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d427289508443af266b25bd66abf7f0"><td class="memItemLeft" align="right" valign="top">cl_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#a1d427289508443af266b25bd66abf7f0">poclu_get_any_device</a> (cl_context *context, cl_device_id *device, cl_command_queue *queue)</td></tr>
<tr class="memdesc:a1d427289508443af266b25bd66abf7f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">set up a context, device and queue for platform 0, device 0.  <a href="misc_8c.html#a1d427289508443af266b25bd66abf7f0">More...</a><br /></td></tr>
<tr class="separator:a1d427289508443af266b25bd66abf7f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1341bcd239932e81d9c67fddf912c70"><td class="memItemLeft" align="right" valign="top">cl_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#ad1341bcd239932e81d9c67fddf912c70">poclu_get_any_device2</a> (cl_context *context, cl_device_id *device, cl_command_queue *queue, cl_platform_id *platform)</td></tr>
<tr class="memdesc:ad1341bcd239932e81d9c67fddf912c70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up a context, device and queue for platform 0, device 0.  <a href="misc_8c.html#ad1341bcd239932e81d9c67fddf912c70">More...</a><br /></td></tr>
<tr class="separator:ad1341bcd239932e81d9c67fddf912c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa3ddc7d669b8743b600439649f3f3fb"><td class="memItemLeft" align="right" valign="top">cl_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#afa3ddc7d669b8743b600439649f3f3fb">poclu_get_multiple_devices</a> (cl_platform_id *platform, cl_context *context, cl_uint *num_devices, cl_device_id **devices, cl_command_queue **queues)</td></tr>
<tr class="memdesc:afa3ddc7d669b8743b600439649f3f3fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">set up all available devices and queues for a single context on the first platform.  <a href="misc_8c.html#afa3ddc7d669b8743b600439649f3f3fb">More...</a><br /></td></tr>
<tr class="separator:afa3ddc7d669b8743b600439649f3f3fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af290e333a25fa632645d8f71d1ae788d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#af290e333a25fa632645d8f71d1ae788d">poclu_read_binfile</a> (const char *filename, size_t *len)</td></tr>
<tr class="memdesc:af290e333a25fa632645d8f71d1ae788d"><td class="mdescLeft">&#160;</td><td class="mdescRight">read the contents of a file.  <a href="misc_8c.html#af290e333a25fa632645d8f71d1ae788d">More...</a><br /></td></tr>
<tr class="separator:af290e333a25fa632645d8f71d1ae788d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe4b739488ebabbad58028f133776ee4"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#abe4b739488ebabbad58028f133776ee4">poclu_read_file</a> (const char *filename)</td></tr>
<tr class="memdesc:abe4b739488ebabbad58028f133776ee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">read the contents of a file.  <a href="misc_8c.html#abe4b739488ebabbad58028f133776ee4">More...</a><br /></td></tr>
<tr class="separator:abe4b739488ebabbad58028f133776ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7055edc552afd5082b1e89d88f883cb6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#a7055edc552afd5082b1e89d88f883cb6">poclu_write_file</a> (const char *filename, char *content, size_t size)</td></tr>
<tr class="memdesc:a7055edc552afd5082b1e89d88f883cb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">write content to a file.  <a href="misc_8c.html#a7055edc552afd5082b1e89d88f883cb6">More...</a><br /></td></tr>
<tr class="separator:a7055edc552afd5082b1e89d88f883cb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9312b38d78105ca83b8e66c2f6bf93da"><td class="memItemLeft" align="right" valign="top">cl_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#a9312b38d78105ca83b8e66c2f6bf93da">poclu_show_program_build_log</a> (cl_program program)</td></tr>
<tr class="memdesc:a9312b38d78105ca83b8e66c2f6bf93da"><td class="mdescLeft">&#160;</td><td class="mdescRight">print program build log of each device to stderr.  <a href="misc_8c.html#a9312b38d78105ca83b8e66c2f6bf93da">More...</a><br /></td></tr>
<tr class="separator:a9312b38d78105ca83b8e66c2f6bf93da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a5a1c164e2f6ba8b94631b2ed2582f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#a2a5a1c164e2f6ba8b94631b2ed2582f6">check_cl_error</a> (cl_int cl_err, int line, const char *func_name)</td></tr>
<tr class="memdesc:a2a5a1c164e2f6ba8b94631b2ed2582f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">check a return value of CL function or print the error to stderr.  <a href="misc_8c.html#a2a5a1c164e2f6ba8b94631b2ed2582f6">More...</a><br /></td></tr>
<tr class="separator:a2a5a1c164e2f6ba8b94631b2ed2582f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2afd9753c925cffdf0a6ddf2a84d7917"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#a2afd9753c925cffdf0a6ddf2a84d7917">pocl_getpath</a> (char *path, size_t len, const char *explicit_binary, const char *basename, const char *ext)</td></tr>
<tr class="memdesc:a2afd9753c925cffdf0a6ddf2a84d7917"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the path of a source file.  <a href="misc_8c.html#a2afd9753c925cffdf0a6ddf2a84d7917">More...</a><br /></td></tr>
<tr class="separator:a2afd9753c925cffdf0a6ddf2a84d7917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cbfd2fe01f6d2f1b210e0981bbc0d4e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#a0cbfd2fe01f6d2f1b210e0981bbc0d4e">poclu_load_program_multidev</a> (cl_context context, cl_device_id *devices, cl_uint num_devices, const char *basename, int spir, int spirv, int poclbin, const char *explicit_binary, const char *extra_build_opts, cl_program *p)</td></tr>
<tr class="memdesc:a0cbfd2fe01f6d2f1b210e0981bbc0d4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">create a program from different sources  <a href="misc_8c.html#a0cbfd2fe01f6d2f1b210e0981bbc0d4e">More...</a><br /></td></tr>
<tr class="separator:a0cbfd2fe01f6d2f1b210e0981bbc0d4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c0aaff64f38b47961137bf29673b3cc"><td class="memItemLeft" align="right" valign="top"><a id="a9c0aaff64f38b47961137bf29673b3cc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="misc_8c.html#a9c0aaff64f38b47961137bf29673b3cc">poclu_load_program</a> (cl_context context, cl_device_id device, const char *basename, int spir, int spirv, int poclbin, const char *explicit_binary, const char *extra_build_opts, cl_program *p)</td></tr>
<tr class="memdesc:a9c0aaff64f38b47961137bf29673b3cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">wrapper for poclu_load_program_multidev, see it for details. <br /></td></tr>
<tr class="separator:a9c0aaff64f38b47961137bf29673b3cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>poclu_misc - misc generic OpenCL helper functions </p>
<p>Copyright (c) 2013 Pekka Jääskeläinen / Tampere University of Technology Copyright (c) 2014 Kalle Raiskila</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a397d286c9e716f522384d26072c963c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a397d286c9e716f522384d26072c963c8">&#9670;&nbsp;</a></span>OPENCL_ERROR_CASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OPENCL_ERROR_CASE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ERR</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">case</span> ERR:                                                             \</div>
<div class="line">  { fprintf (stderr, <span class="stringliteral">&quot;&quot;</span> #ERR <span class="stringliteral">&quot; in %s on line %i\n&quot;</span>, func_name, line);   \</div>
<div class="line">    return 1; }</div>
</div><!-- fragment -->
<p>private macro to check errors in check_cl_error function </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2a5a1c164e2f6ba8b94631b2ed2582f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a5a1c164e2f6ba8b94631b2ed2582f6">&#9670;&nbsp;</a></span>check_cl_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_cl_error </td>
          <td>(</td>
          <td class="paramtype">cl_int&#160;</td>
          <td class="paramname"><em>cl_err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check a return value of CL function or print the error to stderr. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cl_err</td><td>[in] value to be checked. </td></tr>
    <tr><td class="paramname">line</td><td>[in] line of function in question. </td></tr>
    <tr><td class="paramname">func_name</td><td>[in] name of the function in question. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if cl_err is CL_SUCCESS otherwise 1. </dd></dl>

<p class="reference">Referenced by <a class="el" href="misc_8c.html#a9312b38d78105ca83b8e66c2f6bf93da">poclu_show_program_build_log()</a>.</p>

</div>
</div>
<a id="a2afd9753c925cffdf0a6ddf2a84d7917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2afd9753c925cffdf0a6ddf2a84d7917">&#9670;&nbsp;</a></span>pocl_getpath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pocl_getpath </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>explicit_binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>basename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get the path of a source file. </p>
<p>can be either used by passing the explicit_binary option or using basename + ext arguments. if basename + ext is not found in current working directory, it will check the build or source directories for said file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>[out] the return string of the path. </td></tr>
    <tr><td class="paramname">len</td><td>[in] the lenght of the destination path. </td></tr>
    <tr><td class="paramname">explicit_binary</td><td>[in] string to the file. </td></tr>
    <tr><td class="paramname">basename</td><td>[in] relative name of the program c program running. </td></tr>
    <tr><td class="paramname">ext</td><td>[in] extension of the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CL_SUCCESS or CL_BUILD_PROGRAM_FAILURE on error. </dd></dl>

<p class="reference">Referenced by <a class="el" href="misc_8c.html#a0cbfd2fe01f6d2f1b210e0981bbc0d4e">poclu_load_program_multidev()</a>.</p>

</div>
</div>
<a id="ac9b087a0db54cb46f652e6a152955e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9b087a0db54cb46f652e6a152955e4c">&#9670;&nbsp;</a></span>poclu_create_any_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cl_context poclu_create_any_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a context in the first platform found. </p>
<p>Misc. helper functions for streamlining OpenCL API usage. </p><dl class="section return"><dt>Returns</dt><dd>a cl_context. </dd></dl>

</div>
</div>
<a id="a1d427289508443af266b25bd66abf7f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d427289508443af266b25bd66abf7f0">&#9670;&nbsp;</a></span>poclu_get_any_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cl_int poclu_get_any_device </td>
          <td>(</td>
          <td class="paramtype">cl_context *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_device_id *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_command_queue *&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set up a context, device and queue for platform 0, device 0. </p>
<p>similar to pocl_get_any_device2, but doesn't return the platform. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>[out] </td></tr>
    <tr><td class="paramname">device</td><td>[out] </td></tr>
    <tr><td class="paramname">queue</td><td>[out] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CL_SUCCESS on success, or a descriptive OpenCL error code upon failure. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>All input parameters must be allocated by caller! </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="misc_8c_a1d427289508443af266b25bd66abf7f0_cgraph.png" border="0" usemap="#amisc_8c_a1d427289508443af266b25bd66abf7f0_cgraph" alt=""/></div>
<map name="amisc_8c_a1d427289508443af266b25bd66abf7f0_cgraph" id="amisc_8c_a1d427289508443af266b25bd66abf7f0_cgraph">
<area shape="rect" title="set up a context, device and queue for platform 0, device 0." alt="" coords="5,5,172,32"/>
<area shape="rect" href="misc_8c.html#ad1341bcd239932e81d9c67fddf912c70" title="Set up a context, device and queue for platform 0, device 0." alt="" coords="220,5,395,32"/>
</map>
</div>

</div>
</div>
<a id="ad1341bcd239932e81d9c67fddf912c70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1341bcd239932e81d9c67fddf912c70">&#9670;&nbsp;</a></span>poclu_get_any_device2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cl_int poclu_get_any_device2 </td>
          <td>(</td>
          <td class="paramtype">cl_context *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_device_id *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_command_queue *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_platform_id *&#160;</td>
          <td class="paramname"><em>platform</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up a context, device and queue for platform 0, device 0. </p>
<p>similar to pocl_get_any_device, but returns the platform as well. </p><dl class="section warning"><dt>Warning</dt><dd>All input parameters must be allocated by caller! </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>[out] </td></tr>
    <tr><td class="paramname">device</td><td>[out] </td></tr>
    <tr><td class="paramname">queue</td><td>[out] </td></tr>
    <tr><td class="paramname">platform</td><td>[out] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CL_SUCCESS on success, or a descriptive OpenCL error code upon failure. </dd></dl>

<p class="reference">Referenced by <a class="el" href="misc_8c.html#a1d427289508443af266b25bd66abf7f0">poclu_get_any_device()</a>.</p>

</div>
</div>
<a id="afa3ddc7d669b8743b600439649f3f3fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa3ddc7d669b8743b600439649f3f3fb">&#9670;&nbsp;</a></span>poclu_get_multiple_devices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cl_int poclu_get_multiple_devices </td>
          <td>(</td>
          <td class="paramtype">cl_platform_id *&#160;</td>
          <td class="paramname"><em>platform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_context *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_uint *&#160;</td>
          <td class="paramname"><em>num_devices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_device_id **&#160;</td>
          <td class="paramname"><em>devices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_command_queue **&#160;</td>
          <td class="paramname"><em>queues</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set up all available devices and queues for a single context on the first platform. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">platform</td><td>[out] pointer to the first platform found. </td></tr>
    <tr><td class="paramname">context</td><td>[out] pointer to the shared context of all devices. </td></tr>
    <tr><td class="paramname">num_devices</td><td>[out] the number of devices found. </td></tr>
    <tr><td class="paramname">devices</td><td>[out] pointer to array of device pointers. </td></tr>
    <tr><td class="paramname">queues</td><td>[out] pointer to array of queue pointers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CL_SUCCESS on success, or a descriptive OpenCL error code upon failure. </dd></dl>

</div>
</div>
<a id="a0cbfd2fe01f6d2f1b210e0981bbc0d4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cbfd2fe01f6d2f1b210e0981bbc0d4e">&#9670;&nbsp;</a></span>poclu_load_program_multidev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int poclu_load_program_multidev </td>
          <td>(</td>
          <td class="paramtype">cl_context&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_device_id *&#160;</td>
          <td class="paramname"><em>devices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_uint&#160;</td>
          <td class="paramname"><em>num_devices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>basename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>spir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>spirv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>poclbin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>explicit_binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>extra_build_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_program *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>create a program from different sources </p>
<p>this function can create a program from a wide variety of sources, including: spir, spirv, cl or poclbin. It will look for a file with a name matching basename + source type in the following order of directories: current, build and source. If the explicit_binary option is given, it will use that instead. NOTE that the file extension needs to be included in the explicit_binary option. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>[in] context where the program should run </td></tr>
    <tr><td class="paramname">devices</td><td>[in] array of SAME devices for program to run on </td></tr>
    <tr><td class="paramname">num_devices</td><td>[in] number of devices in array of devices. </td></tr>
    <tr><td class="paramname">basename</td><td>[in] name of the program to be run, used to find sources. </td></tr>
    <tr><td class="paramname">spir</td><td>[in] boolean to indicate whether to use spir sources. </td></tr>
    <tr><td class="paramname">spirv</td><td>[in] boolean to indicate whether to use spirv sources. </td></tr>
    <tr><td class="paramname">poclbin</td><td>[in] boolean to indicate whether to use a pocl binary source. </td></tr>
    <tr><td class="paramname">explicit_binary</td><td>[in] optional explicit path to sources. </td></tr>
    <tr><td class="paramname">extra_build_opts</td><td>[in] string of extra options to use when compiling sources. </td></tr>
    <tr><td class="paramname">p</td><td>[out] resulting program from source. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CL_SUCCESS or else a related CL error.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>all devices need to be of the same type or else an error will be thrown. </dd></dl>

<p class="reference">Referenced by <a class="el" href="misc_8c.html#a9c0aaff64f38b47961137bf29673b3cc">poclu_load_program()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="misc_8c_a0cbfd2fe01f6d2f1b210e0981bbc0d4e_cgraph.png" border="0" usemap="#amisc_8c_a0cbfd2fe01f6d2f1b210e0981bbc0d4e_cgraph" alt=""/></div>
<map name="amisc_8c_a0cbfd2fe01f6d2f1b210e0981bbc0d4e_cgraph" id="amisc_8c_a0cbfd2fe01f6d2f1b210e0981bbc0d4e_cgraph">
<area shape="rect" title="create a program from different sources" alt="" coords="5,49,160,90"/>
<area shape="rect" href="misc_8c.html#a2afd9753c925cffdf0a6ddf2a84d7917" title="get the path of a source file." alt="" coords="215,5,321,32"/>
<area shape="rect" href="misc_8c.html#af290e333a25fa632645d8f71d1ae788d" title="read the contents of a file." alt="" coords="376,81,516,108"/>
<area shape="rect" href="misc_8c.html#abe4b739488ebabbad58028f133776ee4" title="read the contents of a file." alt="" coords="208,107,328,133"/>
</map>
</div>

</div>
</div>
<a id="af290e333a25fa632645d8f71d1ae788d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af290e333a25fa632645d8f71d1ae788d">&#9670;&nbsp;</a></span>poclu_read_binfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* poclu_read_binfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read the contents of a file. </p>
<p>filename can absolute or relative, according to the fopen implementation. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>[in] string to the file. </td></tr>
    <tr><td class="paramname">len</td><td>[out] length of the binary file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a malloc'd buffer pointer or NULL on errors. </dd></dl>

<p class="reference">Referenced by <a class="el" href="misc_8c.html#a0cbfd2fe01f6d2f1b210e0981bbc0d4e">poclu_load_program_multidev()</a>, and <a class="el" href="misc_8c.html#abe4b739488ebabbad58028f133776ee4">poclu_read_file()</a>.</p>

</div>
</div>
<a id="abe4b739488ebabbad58028f133776ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe4b739488ebabbad58028f133776ee4">&#9670;&nbsp;</a></span>poclu_read_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* poclu_read_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read the contents of a file. </p>
<p>filename can absolute or relative, according to the fopen implementation. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>[in] string to the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a malloc'd buffer pointer or NULL on errors. </dd></dl>

<p class="reference">Referenced by <a class="el" href="misc_8c.html#a0cbfd2fe01f6d2f1b210e0981bbc0d4e">poclu_load_program_multidev()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="misc_8c_abe4b739488ebabbad58028f133776ee4_cgraph.png" border="0" usemap="#amisc_8c_abe4b739488ebabbad58028f133776ee4_cgraph" alt=""/></div>
<map name="amisc_8c_abe4b739488ebabbad58028f133776ee4_cgraph" id="amisc_8c_abe4b739488ebabbad58028f133776ee4_cgraph">
<area shape="rect" title="read the contents of a file." alt="" coords="5,5,125,32"/>
<area shape="rect" href="misc_8c.html#af290e333a25fa632645d8f71d1ae788d" title="read the contents of a file." alt="" coords="173,5,313,32"/>
</map>
</div>

</div>
</div>
<a id="a9312b38d78105ca83b8e66c2f6bf93da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9312b38d78105ca83b8e66c2f6bf93da">&#9670;&nbsp;</a></span>poclu_show_program_build_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cl_int poclu_show_program_build_log </td>
          <td>(</td>
          <td class="paramtype">cl_program&#160;</td>
          <td class="paramname"><em>program</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>print program build log of each device to stderr. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">program</td><td>[in] program of which to print build logs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CL_SUCCESS or else a CL related error. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="misc_8c_a9312b38d78105ca83b8e66c2f6bf93da_cgraph.png" border="0" usemap="#amisc_8c_a9312b38d78105ca83b8e66c2f6bf93da_cgraph" alt=""/></div>
<map name="amisc_8c_a9312b38d78105ca83b8e66c2f6bf93da_cgraph" id="amisc_8c_a9312b38d78105ca83b8e66c2f6bf93da_cgraph">
<area shape="rect" title="print program build log of each device to stderr." alt="" coords="5,5,165,47"/>
<area shape="rect" href="misc_8c.html#a2a5a1c164e2f6ba8b94631b2ed2582f6" title="check a return value of CL function or print the error to stderr." alt="" coords="213,13,329,39"/>
</map>
</div>

</div>
</div>
<a id="a7055edc552afd5082b1e89d88f883cb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7055edc552afd5082b1e89d88f883cb6">&#9670;&nbsp;</a></span>poclu_write_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int poclu_write_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write content to a file. </p>
<p>filename can absolute or relative, according to the fopen implementation on system. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>[in] string to the file. </td></tr>
    <tr><td class="paramname">content</td><td>[in] string to be written. </td></tr>
    <tr><td class="paramname">size</td><td>[in] size of the content. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if there is any error otherwise 0. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_11bfa529f412b08f6dd34a69c69f89c0.html">poclu</a></li><li class="navelem"><a class="el" href="misc_8c.html">misc.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
